<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

		<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<title>Display Webcam Stream</title>
  
<style>
html,body {
	padding:0;
	margin:0;
	height:100%;
}
#container {
    margin: 0px auto;
    width: 100%;
    height: 100%;
}
#videoElement {
    width: 100%;
    height: 100%;
    background-color: #000000;
	
  width: 100%;
  min-height:100vh;
  margin:0 auto;
  position:fixed;
  background: transparent;
  border-radius: 5px;
}
canvas {
	position:absolute;
	top:0;
	left:0;
}
</style>
</head>
  
<body>

<div id="container">
    <video autoplay="true" id="videoElement">
     
    </video>
</div>
<canvas id="output" width="360px" height="512px"></canvas>



<script>

alert(1);

/*
var previousFrame = null;
var currentFrame = null;


var video = document.querySelector("#videoElement");
navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
video.onloadedmetadata = function() {

}
if (navigator.getUserMedia) {   
	MediaStreamTrack.getSources(gotSources);
}

function gotSources(sourceInfos) {

	var audioSource = sourceInfos[0].id;
	var videoSource = sourceInfos[4].id;
	
	 var constraints = {
		audio: false,
		video: {
		  optional: [{sourceId: videoSource}]
		}
	  };
	navigator.getUserMedia(constraints, handleVideo, videoError);
}
 
function handleVideo(stream) {
    video.src = window.URL.createObjectURL(stream);
	
	setInterval(function() {
		show_video();
	}, 3000);
}


 
function videoError(e) {
    // do something
	alert(e.message + " " + e.constraint + " " + e.name);
}

*/






function show_video() {
	var back = document.getElementById('output');
	var backcontext = back.getContext('2d');
	var cw = back.width;
	var ch = back.height;
	//draw(back, video, backcontext, cw, ch);
}
/*
function draw(back, v, bc, w, h) {

	// First, draw it into the backing canvas
	bc.drawImage(v, 0, 0, w, h);
	
	var imgData = bc.getImageData(0,0,w,h);
	var data = imgData.data;

	// enumerate all pixels
	// each pixel's r,g,b,a datum are stored in separate sequential array elements
	
	alert(1);
	if (previousFrame==null) {
		previousFrame = data;
	} else {
	
		currentFrame = data;
		var deltaImage = compare(previousFrame, currentFrame, w, h);
		if (deltaImage) {
			previousFrame = currentFrame;
			// send deltaImage to server
		}
	}
}


function compare(data1, data2, w, h) {
	for(var i=0; i<data.length; i+=4) {
	
		var x = (i / 4) % w;
		var y = Math.floor((i / 4) / w);
		alert(x + ", " + y)
	
		var red = data[i];
		var green = data[i+1];
		var blue = data[i+2];
		var alpha = data[i+3];
	}
}

*/



</script>
</body>
</html>